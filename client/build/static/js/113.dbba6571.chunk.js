"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[113],{6543:(e,t,a)=>{a.d(t,{p:()=>r});const r="http://localhost:3001"},113:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(5043),o=a(3519),s=a(8155),n=a(599),i=a(1468),l=a(2462),c=a(6058),d=a(2104),h=(a(5351),a(9042)),p=a(5772),m=a(6361),u=a(3003),y=a(4510),x=a(6213),j=a(6543),A=a(579);const f=(0,d.Ay)(j.p);m.t1.register(h.A);const w=()=>{const e=(0,u.d4)(y.Cd),[t,a]=(0,r.useState)({today:[],last7Days:[],thisMonth:[]}),[d,h]=(0,r.useState)("today"),[m,w]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[D,C]=(0,r.useState)(""),[b,k]=(0,r.useState)(""),S=(new Date).toISOString().split("T")[0];(0,r.useEffect)((()=>((async()=>{try{const t=await x.A.get(`${j.p}/api/report/mis-report`,{headers:{Authorization:`Bearer ${e}`}});a(t.data)}catch(b){console.error("Error fetching report data:",b)}})(),f.on("misReport",(e=>{console.log("Received MIS Report:",e),a(e)})),()=>{f.off("misReport")})),[]);return(0,A.jsx)("div",{style:{backgroundColor:"#343a40",color:"white",minHeight:"100vh",paddingTop:"20px"},children:(0,A.jsxs)(o.A,{children:[(0,A.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,A.jsx)(s.A,{variant:"outline-primary",onClick:()=>w(!0),className:"me-3 mt-3",children:(0,A.jsx)(p.a4x,{size:30,style:{cursor:"pointer",color:"white"},title:"Download Report"})})}),(0,A.jsx)("div",{className:"chart-container",style:{width:"40%",margin:"0 auto"},children:(0,A.jsx)(c.Fq,{data:(()=>{const e=t[d]||[],a=e.map((e=>e.category));return{datasets:[{data:e.map((e=>e.count)),backgroundColor:["#28a745","#ffc107","#a3231f","#d6204e"],hoverOffset:4}],labels:a}})(),options:{plugins:{legend:{labels:{color:"white"}},datalabels:{color:"white",display:!0,anchor:"center",align:"center",formatter:e=>e}}}})}),(0,A.jsxs)(n.A,{className:"mb-3 d-flex justify-content-center mt-5",children:[(0,A.jsx)(s.A,{variant:"today"===d?"primary":"outline-primary",onClick:()=>h("today"),children:"Today"}),(0,A.jsx)(s.A,{variant:"last7Days"===d?"primary":"outline-primary",onClick:()=>h("last7Days"),children:"Last 7 Days"}),(0,A.jsx)(s.A,{variant:"thisMonth"===d?"primary":"outline-primary",onClick:()=>h("thisMonth"),children:"Last 30 Days"})]}),(0,A.jsxs)(i.A,{show:m,onHide:()=>w(!1),children:[(0,A.jsx)(i.A.Header,{closeButton:!0,children:(0,A.jsx)(i.A.Title,{children:"Download Report"})}),(0,A.jsxs)(i.A.Body,{children:[b&&(0,A.jsx)("div",{className:"text-danger",children:b}),(0,A.jsxs)(l.A,{children:[(0,A.jsxs)(l.A.Group,{controlId:"fromDate",children:[(0,A.jsx)(l.A.Label,{children:"From Date"}),(0,A.jsx)(l.A.Control,{type:"date",value:g,max:S,onChange:e=>v(e.target.value)})]}),(0,A.jsxs)(l.A.Group,{controlId:"toDate",children:[(0,A.jsx)(l.A.Label,{children:"To Date"}),(0,A.jsx)(l.A.Control,{type:"date",value:D,max:g||S,onChange:e=>C(e.target.value)})]})]})]}),(0,A.jsxs)(i.A.Footer,{children:[(0,A.jsx)(s.A,{variant:"secondary",onClick:()=>w(!1),children:"Close"}),(0,A.jsx)(s.A,{variant:"primary",onClick:async()=>{if(g&&D)if(new Date(g)>new Date(D))k("From Date must be earlier than To Date.");else{k("");try{const t=await x.A.get(`${j.p}/api/report/mis-download?fromDate=${g}&toDate=${D}`,{headers:{Authorization:`Bearer ${e}`}}),a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","MISReport.csv"),document.body.appendChild(r),r.click(),r.remove()}catch(b){console.error("Error downloading report:",b)}finally{w(!1)}}else k("Please enter both dates.")},children:"Download"})]})]})]})})}}}]);
//# sourceMappingURL=113.dbba6571.chunk.js.map
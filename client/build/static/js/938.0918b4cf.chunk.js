"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[938],{6543:(e,t,s)=>{s.d(t,{p:()=>n});const n="http://localhost:3001"},7938:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(6213),a=s(5043),r=s(8155),i=s(4196),l=s(1468),d=s(2462),o=s(4510),c=s(3003),h=s(633),u=s(6543),p=s(579);const x=()=>{const e=(0,c.d4)(o.Cd),[t,s]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[j,A]=(0,a.useState)(!1),[y,v]=(0,a.useState)({id:null,name:"",industry:"",phone:"",email:"",password:""}),[C,g]=(0,a.useState)(1),[f,b]=(0,a.useState)(1),w=async()=>{try{m(!0);const t=await n.A.get(`${u.p}/api/client?page=${C}&limit=5`,{headers:{Authorization:`Bearer ${e}`}});s(t.data.data.clients),b(t.data.data.pagination.totalPages)}catch(t){h.Ay.error("Failed to fetch clients.")}finally{m(!1)}},$=function(){v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),A(!0)},N=()=>{A(!1),k()},k=()=>{v({id:null,name:"",industry:"",phone:"",email:"",password:""})},S=e=>{const{name:t,value:s}=e.target;v((e=>({...e,[t]:s})))};return(0,a.useEffect)((()=>{w()}),[C]),(0,p.jsxs)("div",{style:{backgroundColor:"#343a40",color:"white",minHeight:"100vh",paddingTop:"20px"},children:[(0,p.jsx)("h1",{className:"text-center mb-4",children:"Clients"}),(0,p.jsx)("div",{className:"d-flex justify-content-end",style:{width:"80%",margin:"0 auto"},children:(0,p.jsx)(r.A,{variant:"primary",className:"mb-3",onClick:()=>$(),children:"Add Client"})}),(0,p.jsxs)(i.A,{striped:!0,bordered:!0,hover:!0,variant:"dark",style:{backgroundColor:"#343a40",width:"80%",margin:"0 auto"},children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"Industry"}),(0,p.jsx)("th",{children:"Phone"}),(0,p.jsx)("th",{children:"Email"}),(0,p.jsx)("th",{children:"Actions"})]})}),(0,p.jsx)("tbody",{children:x?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"5",className:"text-center",children:"Loading..."})}):0===t.length?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"5",className:"text-center",children:"No data available"})}):t.map((t=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:t.name}),(0,p.jsx)("td",{children:t.industry}),(0,p.jsx)("td",{children:t.phone}),(0,p.jsx)("td",{children:t.email}),(0,p.jsxs)("td",{children:[(0,p.jsx)(r.A,{variant:"warning",onClick:()=>$(t),children:"Edit"}),(0,p.jsx)(r.A,{variant:"danger",onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this client?"))try{await n.A.delete(`${u.p}/api/client/${t}`,{headers:{Authorization:`Bearer ${e}`}}),h.Ay.success("Client deleted successfully!"),w()}catch(s){h.Ay.error("Failed to delete client.")}})(t.id),className:"ml-2",children:"Delete"})]})]},t.id)))})]}),t.length>0&&(0,p.jsxs)("div",{className:"d-flex justify-content-end mt-3",style:{width:"80%",margin:"0 auto"},children:[(0,p.jsx)(r.A,{disabled:1===C,onClick:()=>g((e=>e-1)),className:"mr-2",children:"Previous"}),(0,p.jsxs)("span",{className:"mr-2",children:["Page ",C," of ",f]}),(0,p.jsx)(r.A,{disabled:C===f,onClick:()=>g((e=>e+1)),children:"Next"})]}),(0,p.jsxs)(l.A,{show:j,onHide:N,children:[(0,p.jsx)(l.A.Header,{closeButton:!0,children:(0,p.jsx)(l.A.Title,{children:y.id?"Edit Client":"Add Client"})}),(0,p.jsx)(l.A.Body,{children:(0,p.jsxs)(d.A,{onSubmit:async t=>{t.preventDefault();try{const{id:t,...s}=y;t?(await n.A.put(`${u.p}/api/client/${t}`,s,{headers:{Authorization:`Bearer ${e}`}}),h.Ay.success("Client updated successfully!")):(await n.A.post(`${u.p}/api/client`,s,{headers:{Authorization:`Bearer ${e}`}}),h.Ay.success("Client created successfully!")),w(),N()}catch(r){var s,a;h.Ay.error((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to save client.")}},children:[(0,p.jsxs)(d.A.Group,{controlId:"name",children:[(0,p.jsx)(d.A.Label,{children:"Name"}),(0,p.jsx)(d.A.Control,{type:"text",name:"name",value:y.name,onChange:S,required:!0})]}),(0,p.jsxs)(d.A.Group,{controlId:"industry",children:[(0,p.jsx)(d.A.Label,{children:"Industry"}),(0,p.jsx)(d.A.Control,{type:"text",name:"industry",value:y.industry,onChange:S,required:!0})]}),(0,p.jsxs)(d.A.Group,{controlId:"phone",children:[(0,p.jsx)(d.A.Label,{children:"Phone"}),(0,p.jsx)(d.A.Control,{type:"text",name:"phone",value:y.phone,onChange:S,required:!0})]}),(0,p.jsxs)(d.A.Group,{controlId:"email",children:[(0,p.jsx)(d.A.Label,{children:"Email"}),(0,p.jsx)(d.A.Control,{type:"email",name:"email",value:y.email,onChange:S,required:!0})]}),(0,p.jsxs)(d.A.Group,{controlId:"password",children:[(0,p.jsx)(d.A.Label,{children:y.id?"New Password":"Password"}),(0,p.jsx)(d.A.Control,{type:"password",name:"password",value:y.password,onChange:S,required:!y.id})]}),(0,p.jsx)(r.A,{variant:"primary",type:"submit",className:"mt-3",children:y.id?"Update Client":"Add Client"})]})})]})]})}},4196:(e,t,s)=>{s.d(t,{A:()=>d});var n=s(8139),a=s.n(n),r=s(5043),i=s(7852),l=s(579);const d=r.forwardRef(((e,t)=>{let{bsPrefix:s,className:n,striped:r,bordered:d,borderless:o,hover:c,size:h,variant:u,responsive:p,...x}=e;const m=(0,i.oU)(s,"table"),j=a()(n,m,u&&`${m}-${u}`,h&&`${m}-${h}`,r&&`${m}-${"string"===typeof r?`striped-${r}`:"striped"}`,d&&`${m}-bordered`,o&&`${m}-borderless`,c&&`${m}-hover`),A=(0,l.jsx)("table",{...x,className:j,ref:t});if(p){let e=`${m}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,l.jsx)("div",{className:e,children:A})}return A}))}}]);
//# sourceMappingURL=938.0918b4cf.chunk.js.map